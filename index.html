<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dr. Barry Eppley Research Dataset</title>
<style>
  :root{--bg:#0e1014;--card:#151923;--muted:#9aa3b2;--text:#e8ecf1;--ok:#1fbf75;--warn:#f6b100;--skip:#6c7480;--line:#232a36;--accent:#5fa8ff}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial}
  .wrap{max-width:1080px;margin:40px auto;padding:0 20px}
  h1{margin:0 0 10px}
  .lead{color:var(--muted);margin:0 0 18px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:18px}
  table{width:100%;border-collapse:collapse} th,td{padding:12px;border-bottom:1px solid var(--line)} th{color:#bfc6d3;text-align:left}
  a{color:var(--accent);text-decoration:none}
  .badge{padding:3px 10px;border-radius:999px;font-weight:700;font-size:.82rem;border:1px solid}
  .ok{color:var(--ok);border-color:var(--ok)} .warn{color:var(--warn);border-color:var(--warn)} .skipped{color:var(--skip);border-color:var(--skip)}
  .right{text-align:right} .foot{margin-top:10px;color:var(--muted)}
</style></head><body>
<div class="wrap">
  <h1>Dr. Barry Eppley Research Dataset</h1>
  <p class="lead">Automatically collected and aggregated from public sources (OpenAlex, Crossref, WordPress). Updated nightly.</p>

  <div class="card">
    <div style="margin:0 0 8px;color:var(--muted)">Last updated: <span id="lu">—</span> • Total records: <span id="tot">—</span></div>
    <table><thead><tr><th>File</th><th>Description</th><th class="right">Rows</th><th>Status</th><th>Download</th></tr></thead>
      <tbody id="tb"></tbody></table>
    <div class="foot">Unified dataset: <a href="output/eppley_master.csv">output/eppley_master.csv</a> • Status: <a href="output/status.json">output/status.json</a></div>
  </div>
</div>
<script>
const FILES = {
  "wordpress_posts.csv": "All blog & Q&A posts authored by Dr. Eppley",
  "crossref_works.csv": "Crossref-indexed scholarly works",
  "openalex_works.csv": "OpenAlex-identified research works",
  "eppley_master.csv": "Unified master dataset (merged from all sources)"
};
const tb=document.getElementById('tb');
function badge(s){const cls=(s==='ok')?'ok':(s==='warn'?'warn':'skipped');return `<span class="badge ${cls}">${s}</span>`;}
fetch('output/status.json',{cache:'no-store'}).then(r=>r.json()).then(s=>{
  document.getElementById('lu').textContent=s.updated_at||'—';
  document.getElementById('tot').textContent=(s.total_records??'—').toLocaleString();
  const order=["wordpress_posts.csv","crossref_works.csv","openalex_works.csv","eppley_master.csv"];
  for(const f of order){
    const rec=s.files[f]||{rows:0,status:"skipped"};
    tb.insertAdjacentHTML('beforeend',
      `<tr><td><b>${f}</b></td><td>${FILES[f]||''}</td><td class="right">${rec.rows.toLocaleString()}</td><td>${badge(rec.status)}</td><td><a href="output/${f}">${f.endsWith('.csv')?'CSV':'File'}</a></td></tr>`
    );
  }
}).catch(()=>{tb.innerHTML=`<tr><td colspan="5">status.json not found</td></tr>`});
</script></body></html>
